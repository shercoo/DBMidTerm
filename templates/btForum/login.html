<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>login</title>
</head>
<body>

{% if users %}
    <ul>
    {% for user in users  %}
        <li>{{ user.name }}</li>
    {% endfor %}
    </ul>
{% endif %}

<form action="{% url 'login' %}" method="post">
{% csrf_token %}
<input style="width: 200px" id="uid" name="uname"
       size="16" type="text"
       placeholder="账号">
<br>
<input style="width: 200px" id="pwd" name="password"
       size="16" type="password"
       placeholder="密码">

<button id="login-button" style="margin-right: 20px;margin-left: 20px;"
        class="btn btn-large" type="submit">登录</button>

</form>
{#<script>#}
{#    $('#login-button').click(function () {#}
{#       var uid = $('#uid').val();#}
{#       var pwd = $('#pwd').val();#}
{#       $.ajax({#}
{#            url: window.location.href,#}
{#            type: "POST",#}
{#            data: {'type': 'login','uid': uid, 'pwd': pwd},#}
{#            beforeSend: function (xhr, settings) {#}
{#                xhr.setRequestHeader("X-CSRFToken", "{{ csrf_token }}");    // csrf#}
{#            },#}
{#            success: function (data) {#}
{#                // data是服务器端返回的字符串#}
{#                var dic = JSON.parse(data)#}
{#                if (!dic.status) alert(JSON.parse(data).msg);#}
{#                else window.location.href="/home";#}
{#            }#}
{#        });#}
{#    });#}
{##}
{##}
{#</script>#}


</body>
</html>